<!DOCTYPE html>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"
        xmlns:display="http://www.w3.org/1999/xhtml"></script>
<html xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/fragment :: head"></head>
<!-- ÎÑ§ÎπÑÎ∞î-->


<!--    <link rel="canonical" href="https://getbootstrap.kr/docs/5.1/examples/checkout/">-->
<!--    &lt;!&ndash; Bootstrap core CSS &ndash;&gt;-->
<!--    <link href="/docs/5.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
<!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->

<!-- Favicons -->
<meta name="theme-color" content="#7952b3">

<style>
    .container {
        max-width: 960px;
    }

    section {
        margin: auto;
    }

    aside {
        margin-top: 0px;
        width: 45%;
        padding-top: 0px;
        height: auto;
        box-sizing: border-box;
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        padding: 15px;
        /*background-color: #fff;*/
    }

    /*footer {*/
    /*    height: 50px;*/
    /*    background-color: blue;*/
    /*    position: relative;*/
    /*    clear: both;*/
    /*}*/

</style>


</head>
<body>
<header th:replace="fragments/fragment :: nav"></header>

<script type="text/javascript" src="/js/read-crew.js"></script>

<input type="text" hidden th:value="${crewId}" id="crewIdJoin">
<input type="text" hidden th:value="${details.title}" id="crewName">

<section class="bg-gray200 pt-5 pb-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-2" id="members" style="display: none">

            </div>
            <div class="col-md-7">
                <!-- Begin Sidebar -replace demowebsite with your own id
                        ================================================== -->

                <article class="card">
                    <h1 class="card-title display-5">
                        <span th:text="${details.title}"></span></h1>
                    <img class="card-img-top mb-2" src=https://user-images.githubusercontent.com/73879325/214769088-0db6fd43-002a-4492-940a-9decd66d74a9.png alt="Card image">
                    <div class="card-body">
                        <ul>
                            <div>
                                <!--Ïó¨Í∏∞Ïóê ÏÇ¨Ïö©ÏûêÏùò ÌîÑÎ°úÌïÑ image ÎßÅÌÅ¨ ÎÑ£Í∏∞-->
                                <img src="" class="rounded mx-auto d-block" style="height: 200px; width: 200px;" id="main-image">
                                <input type="hidden" name="img-key" th:value="${details.imagePath}">

                                <h4><a class=name th:href="@{/view/v1/users/profile/{userName}(userName=${details.getUserName()})}">
                                    <span th:text="${details.userName}"></span></a>
                                </h4>


                            </div>
                            <th:block>
                                <li>Î™®Ïßë Ïù∏Ïõê : <span th:text="${details.crewLimit}"></span></li>
                                <li>ÏúÑÏπò : <span th:text="${details.strict}"></span></li>
                                <li>Î™®Ïßë ÎÇ¥Ïö© : <span th:text="${details.content}"></span></li>
                                <li>ÏÉùÏÑ± ÎÇ†Ïßú : <span th:text="${#temporals.format(details.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></span></li>
                                <li>ÏàòÏ†ï ÎÇ†Ïßú : <span th:text="${#temporals.format(details.lastModifiedAt, 'yyyy-MM-dd HH:mm:ss')}"></span></li>
                            </th:block>

                        </ul>
                        <!-- Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞ Î≤ÑÌäº
                        ================================================== -->
                        <div class="row justify-content-center">
                            <form id="form" class="col-sm-8" action="#"
                                  th:action="@{'/view/v1/crews/'+ ${crewId}}" th:object="${crew}" th:method="delete" novalidate>
                                <input id="_method" type="hidden" name="_method" value="delete"/>
                                <div class="form-group" align="center">

                                    <a th:href="@{'/view/v1/crews/'}" class="btn btn-success float-left ml-1" aria-describedby="submitHelp">Î™©Î°ùÏúºÎ°ú</a>
                                    <a th:href="@{'/view/v1/crews/update/' + ${crewId}}" th:if="${#authentication.name} == ${details.userName}"  class="btn btn-primary float-left ml-1" aria-describedby="submitHelp">Í∏Ä ÏàòÏ†ï</a>
                                    <button th:if="${#authentication.name} == ${details.userName}" id="btn-post-delete" class="btn btn-danger float-left ml-1" type="button" onclick="confirmDelete()">Í∏Ä ÏÇ≠Ï†ú</button>

                                </div>
                            </form>
                        </div>

                        <!-- Begin Like -replace demowebsite with your own id
                        ================================================== -->

                        <div align="center">
                            <form class="container" th:action="@{'/view/v1/crews/'+ ${crewId} +'/like'}">
                                <button type="button" class="btn btn-light btn-lg" id="like-btn" onclick="likeBtn(crewId)" style="width:60px;height:50px;font-size: 20px">üëç
                                </button>
                                <tr><div id="likeCnt" th:text="${likeCnt}"></div> </tr>

                            </form>
                        </div>


                        <!-- Begin Comments -replace demowebsite with your own id
                        ================================================== -->
                        <p class="comment">ÎåìÍ∏Ä</p>
                        <form method="post">
                            <div class="input-group" style="width:auto">
                                <label class="form-label mt-4" hidden>ÎåìÍ∏Ä ÏûëÏÑ±</label>
                                <input type="text"  class="form-control" id="commentContent" name="commentContent" placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî">
                                <input type="text" hidden th:value="${crewId}" id="crewIdComment">
                                <input type="text" hidden th:value="${#authentication.getName()}" id="principal">
                                <button type="button" id="commentBtn"  onclick="commentCheck()" class="btn btn-light">ÏûëÏÑ±</button>
                                <div>
                                </div>
                                <br>
                            </div>
                        </form>
                        <p class="field-error commentContentCheck"></p>
                        <br>
                    </div>
                    <div id="commentList"> ÎåìÍ∏Ä</div>

                    <!--End Comments
                    ================================================== -->
                </article>

                <div class="row justify-content-center">
                    <button type="button" class="btn btn-primary" style="display: none" id="signed" >Ï∞∏Ïó¨ Ï§ë</button>
                    <button type="button" class="btn btn-success" style="display: none" id="notallowed" th:onclick="joinCrewAwait()">ÏäπÏù∏ ÎåÄÍ∏∞/Ï∑®ÏÜå ÌïòÍ∏∞</button>
                    <a type="button" th:href="@{/view/v1/room(roomId=${details.chatRoomId})}" class="btn btn-primary" style="display: none" id="chatroom">Ï±ÑÌåÖÎ∞©</a>
                    <button type="button" id="sendtogle" sec:authorize="isAuthenticated()" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Ï∞∏Ïó¨ÌïòÍ∏∞</button>
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Ï∞∏Ïó¨ÌïòÍ∏∞ÏñëÏãù</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="recipient-name" class="col-form-label">Ï†úÎ™©</label>
                                        <input type="text" class="form-control" id="recipient-name">
                                    </div>
                                    <div class="mb-3">
                                        <label for="message-text" class="col-form-label">ÏÜåÍ∞úÎßê</label>
                                        <textarea class="form-control" id="message-text"></textarea>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                    <button type="button" aria-label="Close" data-bs-dismiss="modal" class="btn btn-primary" th:id="join"  th:onclick="joinCrewAwait()">Ï∞∏Ïó¨ÌïòÍ∏∞</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>


<ul class="pagination justify-content-center">
    <li class="page-item" th:classappend="${0 == nowPage} ? 'disabled'">
        <a class="page-link" th:href="@{/view/v1/crews/{crewId}(crewId = ${crewId},
                                                          page = ${nowPage - 1},
                                                          strict=${sportRequest.getStrict()},
                                                          sportsList=${sportRequest.getSportsList()}
                                                          )}">Ïù¥Ï†ÑÍ∏Ä</a>
    </li>


    <li class="page-item" th:classappend="${lastPage == nowPage} ? 'disabled'">
        <a class="page-link" th:href="@{/view/v1/crews/{crewId}(crewId = ${crewId},
                                                          page = ${nowPage + 1},
                                                          strict=${sportRequest.getStrict()},
                                                          sportsList=${sportRequest.getSportsList()}
                                                          )}">Îã§ÏùåÍ∏Ä</a>
    </li>
</ul>



<footer th:replace="fragments/fragment :: footer"></footer>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script th:replace="fragments/fragment :: form-validation"></script>
<script th:replace="fragments/fragment :: read-crew"></script>

<script>
    findMember();
    enterCheck();
</script>

</body>
</html>